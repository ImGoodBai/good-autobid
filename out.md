# 大纲预览页编辑保存功能设计方案

## 1. 功能需求

- 在大纲预览页面直接显示可编辑的内容框
- 提供保存按钮，将编辑后的内容保存到原始文件
- 添加保存状态提示

## 2. 技术方案

### 2.1 前端实现

#### HTML 修改
- 使用textarea或富文本编辑器展示内容
- 添加保存按钮
- 添加保存状态指示器

#### JavaScript 功能
1. 编辑功能
   - 直接在编辑框中修改内容
   - 自动调整编辑框大小
   - 实现基本的编辑快捷键

2. 内容保存功能
   - 收集编辑后的内容
   - 发送到后端保存
   - 显示保存状态反馈

### 2.2 后端实现

1. 新增API端点
   ```python
   @app.route('/api/save_outline', methods=['POST'])
   ```
   - 接收编辑后的内容
   - 验证内容格式
   - 保存到对应的outline.json文件

2. 文件处理
   - 安全写入新内容
   - 错误处理机制

## 3. 用户界面设计

### 3.1 交互元素
- 编辑框：直接显示和编辑内容
- 保存按钮：保存修改内容
- 状态提示：显示"已保存"等状态

### 3.2 视觉反馈
- 编辑框样式美化
- 保存成功/失败的提示信息
- 未保存内容提醒

## 4. 数据流程

1. 用户进入预览页面
   - 加载原始大纲内容到编辑框
   - 直接可以编辑

2. 保存修改
   - 收集编辑框内容
   - 发送到后端
   - 更新保存状态
   - 显示保存结果

## 5. 安全考虑

- 添加内容验证，确保格式正确

## 6. 实现步骤

1. 前端改造
   - 修改HTML模板，添加编辑框和保存按钮
   - 实现JavaScript保存功能
   - 添加保存API调用

2. 后端开发
   - 实现保存API
   - 添加文件处理逻辑
   - 实现错误处理

3. 测试验证
   - 功能测试
   - 边界情况测试
   - 性能测试

## 7. 注意事项

- 保存时进行格式验证
- 添加自动保存功能
- 优化编辑框的响应性能

